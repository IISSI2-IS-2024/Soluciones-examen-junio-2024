{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport React, { useContext, useEffect } from 'react';\nimport * as GlobalStyles from \"../styles/GlobalStyles\";\nimport RestaurantsStack from \"./restaurants/RestaurantsStack\";\nimport ProfileStack from \"./profile/ProfileStack\";\nimport ControlPanelScreen from \"./controlPanel/ControlPanelScreen\";\nimport { useFonts, Montserrat_400Regular, Montserrat_600SemiBold } from '@expo-google-fonts/montserrat';\nimport FlashMessage, { showMessage } from 'react-native-flash-message';\nimport { AuthorizationContext } from \"../context/AuthorizationContext\";\nimport { AppContext } from \"../context/AppContext\";\nimport { ApiError } from \"../api/helpers/Errors\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar Tab = createBottomTabNavigator();\nexport default function Layout() {\n  var _useContext = useContext(AuthorizationContext),\n    getToken = _useContext.getToken,\n    signOut = _useContext.signOut;\n  var _useContext2 = useContext(AppContext),\n    error = _useContext2.error,\n    setError = _useContext2.setError;\n  var init = function () {\n    var _ref = _asyncToGenerator(function* () {\n      yield getToken(function (recoveredUser) {\n        return showMessage({\n          message: \"Session recovered. You are logged in as \" + recoveredUser.firstName,\n          type: 'success',\n          style: GlobalStyles.flashStyle,\n          titleStyle: GlobalStyles.flashTextStyle\n        });\n      }, function (error) {\n        return showMessage({\n          message: \"Session could not be recovered. Please log in. \" + error + \" \",\n          type: 'warning',\n          style: GlobalStyles.flashStyle,\n          titleStyle: GlobalStyles.flashTextStyle\n        });\n      });\n    });\n    return function init() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (error) {\n      showMessage({\n        message: error.message,\n        type: 'danger',\n        style: GlobalStyles.flashStyle,\n        titleStyle: GlobalStyles.flashTextStyle\n      });\n      if (error instanceof ApiError && (error.code === 403 || error.code === 401)) {\n        signOut();\n      }\n      setError(null);\n    }\n  }, [error]);\n  useEffect(function () {\n    init();\n  }, []);\n  var _useFonts = useFonts({\n      Montserrat_400Regular: Montserrat_400Regular,\n      Montserrat_600SemiBold: Montserrat_600SemiBold\n    }),\n    _useFonts2 = _slicedToArray(_useFonts, 1),\n    fontsLoaded = _useFonts2[0];\n  return _jsx(_Fragment, {\n    children: fontsLoaded && _jsxs(NavigationContainer, {\n      theme: GlobalStyles.navigationTheme,\n      children: [_jsxs(Tab.Navigator, {\n        screenOptions: function screenOptions(_ref2) {\n          var route = _ref2.route;\n          return {\n            tabBarIcon: function tabBarIcon(_ref3) {\n              var color = _ref3.color,\n                size = _ref3.size;\n              var iconName;\n              if (route.name === 'My Restaurants') {\n                iconName = 'silverware-fork-knife';\n              } else if (route.name === 'Control Panel') {\n                iconName = 'view-dashboard';\n              } else if (route.name === 'Profile') {\n                iconName = 'account-circle';\n              }\n              return _jsx(MaterialCommunityIcons, {\n                name: iconName,\n                color: color,\n                size: size\n              });\n            },\n            headerShown: false\n          };\n        },\n        children: [_jsx(Tab.Screen, {\n          name: \"My Restaurants\",\n          component: RestaurantsStack\n        }), _jsx(Tab.Screen, {\n          name: \"Control Panel\",\n          component: ControlPanelScreen\n        }), _jsx(Tab.Screen, {\n          name: \"Profile\",\n          component: ProfileStack\n        })]\n      }), _jsx(FlashMessage, {\n        position: \"top\"\n      })]\n    })\n  });\n}","map":{"version":3,"names":["createBottomTabNavigator","NavigationContainer","MaterialCommunityIcons","React","useContext","useEffect","GlobalStyles","RestaurantsStack","ProfileStack","ControlPanelScreen","useFonts","Montserrat_400Regular","Montserrat_600SemiBold","FlashMessage","showMessage","AuthorizationContext","AppContext","ApiError","Tab","Layout","getToken","signOut","error","setError","init","recoveredUser","message","firstName","type","style","flashStyle","titleStyle","flashTextStyle","code","fontsLoaded","navigationTheme","route","tabBarIcon","color","size","iconName","name","headerShown"],"sources":["/Users/luismi/Proyectos/Examenes/DeliverUS-Frontend-Owner/src/screens/Layout.js"],"sourcesContent":["import { createBottomTabNavigator } from '@react-navigation/bottom-tabs'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { MaterialCommunityIcons } from '@expo/vector-icons'\nimport React, { useContext, useEffect } from 'react'\nimport * as GlobalStyles from '../styles/GlobalStyles'\nimport RestaurantsStack from './restaurants/RestaurantsStack'\nimport ProfileStack from './profile/ProfileStack'\nimport ControlPanelScreen from './controlPanel/ControlPanelScreen'\n\n// eslint-disable-next-line camelcase\nimport { useFonts, Montserrat_400Regular, Montserrat_600SemiBold } from '@expo-google-fonts/montserrat'\nimport FlashMessage, { showMessage } from 'react-native-flash-message'\nimport { AuthorizationContext } from '../context/AuthorizationContext'\nimport { AppContext } from '../context/AppContext'\nimport { ApiError } from '../api/helpers/Errors'\n\nconst Tab = createBottomTabNavigator()\n\nexport default function Layout () {\n  const { getToken, signOut } = useContext(AuthorizationContext)\n  const { error, setError } = useContext(AppContext)\n\n  const init = async () => {\n    await getToken(\n      (recoveredUser) => showMessage({\n        message: `Session recovered. You are logged in as ${recoveredUser.firstName}`,\n        type: 'success',\n        style: GlobalStyles.flashStyle,\n        titleStyle: GlobalStyles.flashTextStyle\n      }),\n      (error) => showMessage({\n        message: `Session could not be recovered. Please log in. ${error} `,\n        type: 'warning',\n        style: GlobalStyles.flashStyle,\n        titleStyle: GlobalStyles.flashTextStyle\n      })\n    )\n  }\n\n  useEffect(() => {\n    if (error) {\n      showMessage({\n        message: error.message,\n        type: 'danger',\n        style: GlobalStyles.flashStyle,\n        titleStyle: GlobalStyles.flashTextStyle\n      })\n      if (error instanceof ApiError && (error.code === 403 || error.code === 401)) {\n        signOut()\n      }\n      setError(null)\n    }\n  }, [error])\n\n  useEffect(() => {\n    init()\n  }, [])\n\n  const [fontsLoaded] = useFonts({\n    Montserrat_400Regular,\n    Montserrat_600SemiBold\n  })\n  return (\n    <>\n    {fontsLoaded &&\n     <NavigationContainer theme={GlobalStyles.navigationTheme}>\n\n      <Tab.Navigator screenOptions={({ route }) => ({\n        // eslint-disable-next-line react/display-name\n        tabBarIcon: ({ color, size }) => {\n          let iconName\n          if (route.name === 'My Restaurants') {\n            iconName = 'silverware-fork-knife'\n          } else if (route.name === 'Control Panel') {\n            iconName = 'view-dashboard'\n          } else if (route.name === 'Profile') {\n            iconName = 'account-circle'\n          }\n          return <MaterialCommunityIcons name={iconName} color={color} size={size} />\n        },\n        headerShown: false\n      })}>\n        <Tab.Screen\n          name='My Restaurants'\n          component={RestaurantsStack}\n        />\n        <Tab.Screen\n          name='Control Panel'\n          component={ControlPanelScreen} />\n        <Tab.Screen\n          name='Profile'\n          component={ProfileStack} />\n      </Tab.Navigator>\n      <FlashMessage position=\"top\" />\n\n    </NavigationContainer>\n    }\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}